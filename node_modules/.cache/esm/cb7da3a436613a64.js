let Batch,Signup;_366‍.x([["default",()=>_366‍.o]]);_366‍.w("../model/Batch",[["default",["Batch"],function(v){Batch=v}]]);_366‍.w("../model/Signup",[["default",["Signup"],function(v){Signup=v}]]);




const batchController = {
    
    async storebatch(req,res){
        const  { name } = req.body;
        let data;
        try{
            data = await Batch.create({
                name,
            });
        }
        catch(err){
            return next(err);
        }
        res.status(201).json(data);
  
    },
    async getbatch(req,res) {
            const batchrecord = await Batch.find(
            );
            res.status(201).json(batchrecord);
    },
    async assignbatch(req,res) {
        const  { batch } = req.body;
       _366‍.g.console.log("data",batch,req.params.id)
        let records;
        try{
            records = await Signup.findOneAndUpdate({_id: req.params.id },{
                $set:{batch: batch}
         
            },{new:true})
            _366‍.g.console.log(records)
            res.status(200).json({
                sucess:true,
                data:records
            })
        }
        catch(err){
            _366‍.g.console.log(err)
            res.status(400).json({
                sucess:false,
                data:null,
                
            })
        }

    },
    async get(req,res) {

        const batch = await Batch.find();
        if(!batch){
            res.status(400).json({sucess:false })
        }
        let data=[]
        for(let x of batch){
        const user = await Signup.find({batch:x._id});
        data.push({id:x._id,name:x.name,users:user})

        }
       res.status(201).json(data);
},
    
    
    
}
_366‍.d(batchController);