let Study,fs,Signup,Submission;_fca‍.x([["default",()=>_fca‍.o]]);_fca‍.w("../model/Study",[["default",["Study"],function(v){Study=v}]]);_fca‍.w("fs",[["default",["fs"],function(v){fs=v}]]);_fca‍.w("../model/Signup",[["default",["Signup"],function(v){Signup=v}]]);_fca‍.w("../model/Submission",[["default",["Submission"],function(v){Submission=v}]]);






const submissionController = {


    async updatedassignment(req,res) {
        const {  submission_url ,assignment_id } = req.body;
     
         _fca‍.g.console.log(req.user.id)
         
          let document;
        try{
           document = await Submission.create({
            submission_url,
            user_id: req.user.id,
            assignment_id,
            submitted:true
         });
          }
          catch(err){
             _fca‍.g.console.log(err)
          }
          res.status(201).json({
              success:true,
              data: document
          }); 

    },


    async submission(req,res) {

        const batch = await Submission.find();
        if(!batch){
            res.status(400).json({sucess:false })
        }
        let data=[]
        for(let x of batch){
        const user = await Signup.find({_id:x.user_id});
        data.push({submitted:x.submitted,users:user,submission_url:x.submission_url})
        }
      res.status(201).json(data);
      _fca‍.g.console.log(batch)
    },
  

}
_fca‍.d(submissionController);